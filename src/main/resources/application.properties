spring.application.name=tesis_bachiller_backend_multimodular

# --- GitHub OAuth2 Client Configuration ---
# ¡IMPORTANTE! Estos valores NO deben ser versionados.
# Se resuelven desde variables de entorno para mantener los secretos fuera del código fuente.
# export SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GITHUB_CLIENT_ID='tu_client_id'
# export SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GITHUB_CLIENT_SECRET='tu_client_secret'
spring.security.oauth2.client.registration.github.client-id=${SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GITHUB_CLIENT_ID}
spring.security.oauth2.client.registration.github.client-secret=${SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GITHUB_CLIENT_SECRET}
spring.security.oauth2.client.registration.github.scope=read:user,user:email


# --- Database Configuration (MySQL) ---
# Estos valores se resuelven desde variables de entorno.
# Para desarrollo local con Docker, puedes usar algo como:
# export JDBC_DATABASE_URL='jdbc:mysql://localhost:3306/tesisdb?createDatabaseIfNotExist=true'
# export JDBC_DATABASE_USERNAME='root'
# export JDBC_DATABASE_PASSWORD='your_local_password'
spring.datasource.url=${JDBC_DATABASE_URL}
spring.datasource.username=${JDBC_DATABASE_USERNAME}
spring.datasource.password=${JDBC_DATABASE_PASSWORD}


# --- JPA / Hibernate Configuration ---
# 'update' modificará el esquema de la base de datos al arrancar si hay cambios en las entidades.
spring.jpa.hibernate.ddl-auto=update
# Especifica el dialecto de MySQL para que Hibernate genere el SQL correcto.
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect


# --- Application Specific Configuration ---
dora.initial-admin-username=grubhart

# --- Frontend Configuration ---
app.frontend.url=${APP_FRONTEND_URL}

# --- Server Configuration ---
# Permite que Spring Boot construya las URLs de redirección correctamente cuando se ejecuta detrás de un proxy (como en AWS)
server.forward-headers-strategy=NATIVE

# Poner el nivel de log en DEBUG para nuestro paquete específico
logging.level.org.grubhart.pucp.tesis=DEBUG

# --- Hibernate/JPA Detailed Logging ---
# Muestra las sentencias SQL que Hibernate genera.
logging.level.org.hibernate.SQL=DEBUG
# Muestra los parámetros que se enlazan a las sentencias SQL (¡muy útil!).
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
# Muestra información sobre las transacciones (begin, commit, rollback).
logging.level.org.springframework.transaction=DEBUG
# Formatea el SQL para que sea más legible en los logs.
spring.jpa.properties.hibernate.format_sql=true
# --- Database Initialization ---
# Asegura que los scripts de datos (data.sql) se ejecuten DESPUÉS de que Hibernate (JPA) haya creado las tablas.
spring.jpa.defer-datasource-initialization=true
